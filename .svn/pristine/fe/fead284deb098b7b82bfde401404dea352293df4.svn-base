<template lang="html" style="overflow:auto">
    <section class="L-background">
        <div class="L-center-div">
            <!-- 顶部 -->
            <el-col :span="24" class="toolbar L-ins-head" style="margin: 10px 0;">
                <el-form :inline="true">
                    <el-breadcrumb separator=">">
                        <el-breadcrumb-item :to="{ path: '/setInstructionList' }" class="L-bind-color">指令列表</el-breadcrumb-item>
                        <el-breadcrumb-item>指令设置</el-breadcrumb-item>
                    </el-breadcrumb>
                </el-form>
            </el-col>

            <!-- 编辑按钮 -->
            <div class="L-warn-button">
                <el-col :span="24">
                    <el-form :inline="true">
                        <el-form-item style="width:11%;float:right">
                            <el-button type="primary" class="L-button-content L-bindmessage-button" @click.native="editor" :disabled="this.sels.length === 0" ref="State">保存</el-button>
                        </el-form-item>
                    </el-form>
                </el-col>
            </div>

            <!-- 表格 -->
            <table class="L-setIns-table">
                <thead class="L-thead" >
                    <td v-for="(item,index) in menu" :width="item.width" :key="item.name">{{ item.name }}</td>
                </thead>
                <tbody style="background:#fff;">
                    <tr>
                        <td :rowspan="9">{{ this.name }}</td>
                        <td :rowspan="9">{{ this.id }}</td>
                    </tr>
                    <tr>
                        <td>
                            <el-checkbox @change="changes">传输间隔设置</el-checkbox>
                        </td>
                        <td>
                            <el-select v-model="value" placeholder="请选择">
                                <el-option v-for="item in options" :label="item.label" :value="item.value" :key="item.label">
                                </el-option>
                            </el-select>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <el-checkbox>采集间隔设置</el-checkbox>
                        </td>
                        <td>
                            <el-select v-model="value1" placeholder="请选择">
                                <el-option v-for="item in options" :label="item.label" :value="item.value" :key="item.label">
                                </el-option>
                            </el-select>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <el-checkbox>时间校验设置</el-checkbox>
                        </td>
                        <td>校准时间</td>
                    </tr>
                    <tr>
                        <td>
                            <el-checkbox>连接模式设置</el-checkbox>
                        </td>
                        <td>
                            <el-select v-model="value2" placeholder="请选择">
                                <el-option v-for="item in options1" :label="item.label" :value="item.value" :key="item.label">
                                </el-option>
                            </el-select>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <el-checkbox>修改设备ID</el-checkbox>
                        </td>
                        <td>
                            <div style="margin-left: 15px;">
                                <el-input placeholder="设备ID" style="width:55%" v-model="value3">
                                    <el-button slot="append" >
                                        <img src="../imgs/edit.png" style='width:20px;height:20px'>
                                    </el-button>
                                </el-input>
                            </div>
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <el-checkbox>设别工作模式设置</el-checkbox>
                        </td>
                        <td>
                            <el-select v-model="value4" placeholder="请选择">
                                <el-option v-for="item in options2" :label="item.label" :value="item.value" :key="item.label">
                                </el-option>
                            </el-select>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <el-checkbox>升级设置</el-checkbox>
                        </td>
                        <td>升级</td>
                    </tr>
                    <tr>
                        <td>
                            <el-checkbox @change="changes1">网关设置</el-checkbox>
                        </td>
                        <td>
                            <el-select v-model="value5" placeholder="请选择">
                                <el-option v-for="item in options3" :label="item.gatewayName" :value="item.ip" :key="item.gatewayName">
                                </el-option>
                            </el-select>
                        </td>
                    </tr>
                </tbody>
                <!-- <tbody style="background:#fff;">
                    <tr  style="width100%;text-align:center">
                        <td :colspan="4">
                            没有数据
                        </td>
                    </tr>
                </tbody> -->
            </table>
        </div>
    </section>
</template>

<script>
import { api } from '../js/api/api';
export default {
    mounted(){
        this.countBoxHeight()
        // this.getWarningSettingBySn()
        this.getAllGateway()
    },
    methods:{
        countBoxHeight:function(){
            let LBackground = document.getElementsByClassName("L-background");
            let yheader = document.getElementsByClassName("yheader");
            LBackground[0].style.height = (window.outerHeight - yheader[0].clientHeight) + "px";
        },
        // editor:function(){
            // if(this.editorState){
            //     let para = {
            //         equipmentSid : this.$route.query.id,
            //         warningSettings :this.list
            //     }
            //     this.$http.post( api.saveWarningSetting, para).then((res) => {
            //         this.$message({
            //             type: 'success',
            //             message: res.body.rtMsg
            //         })
            //         this.getWarningSettingBySn()
            //     },
            //     (err) => {
            //         console.log(err)
            //     })
            // }
        // },
        // getWarningSettingBySn:function(){
        //     this.$http.post( api.getWarningSettingBySn, {equipmentSid:this.$route.query.id}).then((res) => {
        //         if(res.body.rtData.warningSettings && res.body.rtData.warningSettings.length != 0){
        //             this.showTable = true;
        //             this.id = res.body.rtData.equipmentInfo.equipmentId;
        //             this.name = res.body.rtData.equipmentInfo.equipmentName;
        //             this.list = res.body.rtData.warningSettings;
        //         }else{
        //             this.showTable = false;
        //         }
        //     })
        // },
        handleClick:function(){

        },
        getAllGateway: function(){
            this.$http.post( api.getAllGateway ).then((res) => {
                this.options3 = res.body.rtData;
            })
        },
        changes:function(){
            if(this.value)
            console.log(this.value)
        },
        changes1(a){
            console.log(a)
        }
    },
    watch:{
        '$route':'id'
    },
    data(){
        return{
            warnStyle:[],
            options:[{
                label:"1min",
                value:"60"
            },{
                label:"5min",
                value:"300"
            },{
                label:"10min",
                value:"600"
            },{
                label:"0.5h",
                value:"1800"
            },{
                label:"1h",
                value:"3600"
            },{
                label:"2h",
                value:"7200"
            },{
                label:"3h",
                value:"10800"
            },{
                label:"6h",
                value:"21600"
            },{
                label:"12h",
                value:"43200"
            },{
                label:"24h",
                value:"84600"
            }],
            options1:[{
                label:"TCP",
                value:"TCP"
            },{
                label:"UDP",
                value:"UDP"
            }],
            options2:[{
                label:"常在线",
                value:"常在线"
            },{
                label:"定是唤醒",
                value:"定是唤醒"
            }],
            options3:[],
            value:"",
            value1:"",
            value2:"",
            value3:"",
            value4:"",
            value5:"",
            menu:[
                {  name:"设备名称",width:"10%" },
                {  name:"设备ID",width:"10%"  },
                {  name:"服务项",width:"10%"},
                {  name:"服务内容",width:"10%"}
            ],
            rowLength:0,
            list:[],
            name:"",
            id:"",
            editorState:true,
            showTable:'',
            sels:[]
        }
    }
}
</script>

<style lang="css">
    .L-setIns-table .el-select{
        width: 48%;
        margin-left: 1.8rem;
    }
    .L-setIns-table td div{
        border:0 !important;
    }
    .L-setIns-table td div button{
        padding:0 !important;
    }
</style>
