<template>
	<div style="height:100%;overflow: auto;background:#f2f2f2;padding:20px;">
		<el-col :span="24" style="height:30px;line-height:30px;border-bottom:2px solid #999;" >
			<el-breadcrumb separator="/">
				<el-breadcrumb-item :to="{ path: '/kehuxinxi' }">客户列表</el-breadcrumb-item>
				<el-breadcrumb-item>查看订单</el-breadcrumb-item>
			</el-breadcrumb>
		</el-col>
		<el-col :span="24" style="height:60px;line-height: 60px;" >
			<el-form :inline="true">
				<el-input icon="search" style="width:40%;margin-right:5%;" :span="8" v-model="text" placeholder="请输入订单编号/产品名称/收货人" type="text" class="tablesearch_box" :maxlength="30"></el-input>
				<el-date-picker v-model="startTime" type="date" editable :format("2017-00-00")  placeholder="选择日期"></el-date-picker>
				-
				<el-date-picker v-model="endTime" type="date" editable placeh older="选择日期"></el-date-picker>
				<el-button type="primary" class="w-search-button" style="margin-left:2%;" @click="handleSearch">查询</el-button>
			</el-form>
		</el-col>

		<table border="0" cellpadding="0" cellspaning="0" width="100%;" style="margin-bottom:5px;" >
			<thead class="w-thead">
				<th  style="width:30%;">产品</th>
				<th  style="width:10%;">数量</th>
				<th  style="width:10%;">总计数量</th>
				<th  style="width:10%;">收货人</th>
				<th  style="width:10%;">状态</th>
			</thead>
		</table>
		<table v-for="(item,index) in tableData" border="1" cellspaning="0" cellpadding="0" style="width:100%;margin-bottom:5px;background:#fff;">
				<thead style="width:100%;">
					<tr class="w-theader" style="border-bottom:1px solid #000;">
						<td colspan="4" style="text-align: left; "><el-checkbox class="w-checkbox" :checked="false"  @change="handleDetails(item,index)" style="margin-left:5px;" >{{item.date}} &nbsp;&nbsp;&nbsp;&nbsp;订单编号:{{item.order}}</el-checkbox></td>
					</tr>
				</thead>
				<tbody style="width:100%;">
				<tr>
					<td style="width:40%;">
						<table style="width:100%;">
							<tr v-for="itemList in item.name" style="border-bottom:0px solid #000;" class="borderNone">
								<td style="width:30%;" class="tdLeft"><img class="tdImg" src="../../imgs/del.png">{{itemList.name}}</td>
								<td style="width:10%;">{{itemList.num}}</td>
							</tr>
						</table>
					</td>
					<td style="width:10%;">{{item.sum}}</td>
					<td style="width:10%;">{{item.getName}}</td>
					<td style="width:10%;">{{item.state}}</td>
				</tr>
			</tbody>
		</table>
		<!--分页-->
		<el-col :span="24" class="toolbar" >
            <el-pagination  style="text-align:right;"  :current-page="currentPage"   layout= " total ,prev, pager, next" :total="total"  @current-change="currentChange"></el-pagination>
        </el-col>
	</div>

</template>
<script>
	export default{

		data () {
			return  {
				//查询内容
				text:"",
				//日期
				startTime:'',
				endTime:"",
				num: "",
				checklist:[],
				//分页内容
                currentPage:1,//当前页数
                total:50,  //总条数
                currentPage:15, //每页显示的条数
				list:[],
				tableData: [
                    {
						sid:123,
                        date:"2016-03-03",
                        order:"123456789",
                        name:[
                            {
                                name:"天创农业物联网设备传感器JN-SS-001",
                                num:3
                            },
                            {
                                name:"天创农业物联网设备传感器JN-SS-001",
                                num:3
                            },
                            {
                                name:"天创农业物联网设备传感器JN-SS-001",
                                num:3
                            }
                        ],
                        sum:6,
                        getName:"龙龙",
                        state:"已发货"
                    },
                    {
						sid:321,
                        date:"2016-03-03",
                        order:"123456789",
                        name:[
                            {
                                name:"天创农业物联网设备传感器JN-SS-001",
                                num:3
                            },
                            {
                                name:"天创农业物联网设备传感器JN-SS-001",
                                num:3
                            }
                        ],
                        sum:6,
                        getName:"龙龙",
                        state:"未发货"
                    },
					{
						sid:111,
                        date:"2016-03-03",
                        order:"123456789",
                        name:[
                            {
                                name:"天创农业物联网设备传感器JN-SS-001",
                                num:3
                            },
                            {
                                name:"天创农业物联网设备传感器JN-SS-001",
                                num:3
                            },
                            {
                                name:"天创农业物联网设备传感器JN-SS-001",
                                num:3
                            }
                        ],
                        sum:6,
                        getName:"龙龙",
                        state:"未发货"
                    },
					{
						sid:222,
                        date:"2016-03-03",
                        order:"123456789",
                        name:[
                            {
                                name:"天创农业物联网设备传感器JN-SS-001",
                                num:3
                            },
                            {
                                name:"天创农业物联网设备传感器JN-SS-001",
                                num:3
                            },
							{
                                name:"天创农业物联网设备传感器JN-SS-001",
                                num:3
                            },
                            {
                                name:"天创农业物联网设备传感器JN-SS-001",
                                num:3
                            }
                        ],
                        sum:6,
                        getName:"龙龙",
                        state:"未发货"
                    }
                ]		
			}
		},
		methods: {
			formatTime: function (row, column) {
				Date.prototype.format = function(format) {
					var date = {
					"M+": this.getMonth() + 1,
					"d+": this.getDate(),
					"h+": this.getHours(),
					"m+": this.getMinutes(),
					"s+": this.getSeconds(),
					"q+": Math.floor((this.getMonth() + 3) / 3),
					"S+": this.getMilliseconds()
					};
					if (/(y+)/i.test(format)) {
					format = format.replace(RegExp.$1, (this.getFullYear() + '').substr(4 - RegExp.$1.length));
					}
					for (var k in date) {
					if (new RegExp("(" + k + ")").test(format)) {
						format = format.replace(RegExp.$1, RegExp.$1.length == 1 ? date[k] : ("00" + date[k]).substr(("" + date[k]).length));
					}
					}
					return format;
				};
				return new Date(row.startTime).format('yyyy-MM-dd');
			},
			//点击搜索函数
			handleSearch:function(){
				var para ={
					text:this.text,
					startData:this.startTime,
					endData:this.endTime
				};
				console.log(para);
				console.log(this.list)
			},
			//分页获取当前页码函数
			currentChange (val) {
                this.currentPage=val;
                // this.handleCustomer();
            },
			handleDetails:function(row,index){
				if(event.target.checked){
					this.checklist.push(row.sid);				
				}else{
					this.checklist.pop()
				}
				// console.log(this.checklist);
			}
			
		}
	};

</script>
<style>
    .w-thead>th{
		text-align: center;
		height:3rem;
		line-height: 3rem;
		background:#E4E4E4;
	}
	.w-theader{
		background:#C4E4F4;
		height:3rem;
		line-height: 3rem;
		width:100%;
	}
	td{
		text-align: center;
		height:3rem;
		line-height: 3rem;
	}
	.tdImg{
		width:2.5rem;
		height:2rem;
		vertical-align:middle;
		margin-right:20px;
		border:1px solid #ccc;
	}
	.tdLeft{
		text-align: left;
		padding-left:15%;
	}
	.w-checkbox:hove{
		color:red;
	}
</style>